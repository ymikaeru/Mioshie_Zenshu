<html lang="ja">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="Microsoft FrontPage Express 2.0" name="GENERATOR" />
    <title>2</title>
    <link href="style1.css" rel="stylesheet" type="text/css" />
</head>

<body style="background-color: rgb(233, 254, 218);">
    <div align="center" style="margin-top: 20px; margin-bottom: 20px;">
        <font face="HGÊ≠£Ê•∑Êõ∏‰Ωì-PRO" size="5"><strong>Biblioteca Sagrada</strong></font>
    </div>

    <script>
        function submitSearch(form) {
            const query = form.query.value;
            if (query) {
                // Force absolute path relative to current location logic
                // Assuming 2.html is at root, we go to ./filetop/search_results.html
                // But let's build the URL properly
                const targetUrl = "filetop/search_results.html?query=" + encodeURIComponent(query);
                parent.main.location.href = targetUrl;
            }
            return false;
        }
    </script>
    <div align="center" style="margin-bottom: 20px;">
        <form action="advanced_search.html" style="display: inline-block; margin: 5px;">
            <input type="submit" value="Busca Avan√ßada"
                style="background-color: #2c7744; color: white; border: none; padding: 10px 24px; cursor: pointer; border-radius: 4px; font-family: 'Century Gothic', sans-serif; font-weight: bold; font-size: 1.1em; box-shadow: 0 2px 4px rgba(0,0,0,0.2);" />
        </form>
        <form action="timeline.html" style="display: inline-block; margin: 5px;">
            <input type="submit" value="Busca Interativa"
                style="background-color: #d4a373; color: white; border: none; padding: 10px 24px; cursor: pointer; border-radius: 4px; font-family: 'Century Gothic', sans-serif; font-weight: bold; font-size: 1.1em; box-shadow: 0 2px 4px rgba(0,0,0,0.2);" />
        </form>
        <br>
        <a href="readme1.html" style="text-decoration: none;">
            <font face="Ôº≠Ôº≥ „Ç¥„Ç∑„ÉÉ„ÇØ" size="2" color="#666666">Sobre este site</font>
        </a>
    </div>








    <!-- Poem Section -->
    <div id="daily-poem-container"
        style="max-width: 1100px; margin: 40px auto; padding: 60px 40px; background: #ffffff; border-radius: 4px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; position: relative; text-align: center;">

        <h3
            style="font-size: 13px; text-transform: uppercase; letter-spacing: 4px; color: #bdc3c7; margin-bottom: 50px; margin-top: 0;">
            Poesia Sagrada</h3>


        <div style="position: relative; z-index: 1;">
            <!-- 1. Large Japanese (Fude Style) -->
            <div id="poem-original"
                style="font-size: 56px; color: #2c3e50; margin-bottom: 10px; font-family: 'Zen Old Mincho', 'Hiragino Mincho ProN', 'Yu Mincho', serif; font-weight: 500; line-height: 1.3;">
            </div>

            <div id="poem-reading"
                style="font-size: 14px; color: #95a5a6; margin-bottom: 40px; letter-spacing: 1px; text-transform: uppercase;">
            </div>

            <!-- 2. Portuguese Translation -->
            <div style="border-top: 1px solid #f1f2f6; width: 60px; margin: 0 auto 40px;"></div>

            <h2 id="poem-title"
                style="font-size: 18px; color: #7f8c8d; margin-bottom: 15px; font-weight: 400; letter-spacing: 1px;">
            </h2>

            <p id="poem-translation"
                style="font-size: 24px; color: #34495e; line-height: 1.6; margin-bottom: 50px; font-family: 'Georgia', serif; font-style: italic;">
            </p>

            <!-- 3. Metadata Sections -->
            <div
                style="text-align: left; max-width: 90%; margin: 0 auto; display: flex; flex-direction: column; gap: 20px;">

                <!-- Kigo (Season) -->
                <div style="background: #fdfefe; padding: 20px; border-left: 3px solid #2ecc71; border-radius: 2px;">
                    <strong
                        style="display: block; margin-bottom: 8px; color: #2ecc71; font-size: 11px; text-transform: uppercase; letter-spacing: 1px;">üçÉ
                        Kigo (Esta√ß√£o e Clima)</strong>
                    <span id="poem-kigo-text" style="font-size: 14px; color: #7f8c8d; line-height: 1.6;"></span>
                </div>

                <!-- Kototama (Sound) -->
                <div style="background: #fdfefe; padding: 20px; border-left: 3px solid #e67e22; border-radius: 2px;">
                    <strong
                        style="display: block; margin-bottom: 8px; color: #e67e22; font-size: 11px; text-transform: uppercase; letter-spacing: 1px;">üéµ
                        Kototama (Sonoridade)</strong>
                    <span id="poem-kototama-text" style="font-size: 14px; color: #7f8c8d; line-height: 1.6;"></span>
                </div>

                <!-- Meaning (Depth) -->
                <div id="poem-meaning"
                    style="background: #fafafa; padding: 25px; border-radius: 4px; font-size: 14px; color: #7f8c8d; line-height: 1.8; display: none;">
                    <strong
                        style="display: block; margin-bottom: 10px; color: #bdc3c7; font-size: 11px; text-transform: uppercase; letter-spacing: 2px; text-align: center;">üíé
                        Significado Profundo</strong>
                    <span id="poem-meaning-text"></span>
                </div>
            </div>

            <!-- Navigation Bottom -->
            <div
                style="display: flex; justify-content: center; gap: 60px; margin-top: 60px; border-top: 1px solid #f1f2f6; padding-top: 40px;">
                <button id="prev-poem"
                    style="background: none; border: none; cursor: pointer; color: #dfe6e9; font-size: 32px; transition: all 0.3s; display: flex; align-items: center; padding: 10px 20px;"
                    onmouseover="this.style.color='#7f8c8d'; this.style.transform='scale(1.1)'"
                    onmouseout="this.style.color='#dfe6e9'; this.style.transform='scale(1)'">
                    &#10094;
                </button>
                <button id="next-poem"
                    style="background: none; border: none; cursor: pointer; color: #dfe6e9; font-size: 32px; transition: all 0.3s; display: flex; align-items: center; padding: 10px 20px;"
                    onmouseover="this.style.color='#7f8c8d'; this.style.transform='scale(1.1)'"
                    onmouseout="this.style.color='#dfe6e9'; this.style.transform='scale(1)'">
                    &#10095;
                </button>
            </div>

            <!-- Link to All Poems - Nordic Style -->
            <div style="text-align: center; margin-top: 30px;">
                <a href="gosanka/yamato.html"
                    style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 28px; background: transparent; color: #7f8c8d; text-decoration: none; border: 1px solid #e0e0e0; border-radius: 2px; font-size: 11px; font-weight: 500; letter-spacing: 2px; text-transform: uppercase; transition: all 0.3s ease;"
                    onmouseover="this.style.borderColor='#95a5a6'; this.style.color='#34495e'; this.style.background='#fafafa';"
                    onmouseout="this.style.borderColor='#e0e0e0'; this.style.color='#7f8c8d'; this.style.background='transparent';">
                    <span style="font-size: 14px;">‚Üí</span> Ver Todas as Poesias
                </a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let allPoems = [];
            let currentIndex = 0;

            function renderPoem(index) {
                const poem = allPoems[index];
                if (!poem) return;

                // Clean the original text to remove the "<b>Leitura:</b>" part included in the JSON source
                // This prevents the reading from appearing twice (once in the big font, once in the small font)
                // Clean the original text to remove the reading part (supports various delimiters)
                let cleanOriginal = poem.original;
                const readingMarkers = ['**Leitura:**', 'Leitura:', '<b>Leitura:</b>'];

                for (const marker of readingMarkers) {
                    if (cleanOriginal.includes(marker)) {
                        cleanOriginal = cleanOriginal.split(marker)[0].trim();
                        break;
                    }
                }

                document.getElementById('poem-title').textContent = poem.title;
                document.getElementById('poem-original').textContent = cleanOriginal;
                document.getElementById('poem-reading').textContent = poem.reading;
                document.getElementById('poem-translation').textContent = poem.translation;

                // Update Metadata Sections
                const displayField = (id, text) => {
                    const el = document.getElementById(id);
                    const container = el.parentElement;
                    if (text) {
                        el.textContent = text;
                        container.style.display = 'block';
                    } else {
                        container.style.display = 'none';
                    }
                };

                displayField('poem-kigo-text', poem.kigo);
                displayField('poem-kototama-text', poem.kototama);
                displayField('poem-meaning-text', poem.meaning);
            }

            function nextPoem() {
                currentIndex = (currentIndex + 1) % allPoems.length;
                renderPoem(currentIndex);
            }

            function prevPoem() {
                currentIndex = (currentIndex - 1 + allPoems.length) % allPoems.length;
                renderPoem(currentIndex);
            }

            fetch('Data/poems.json')
                .then(response => response.json())
                .then(poems => {
                    if (!poems || poems.length === 0) return;
                    allPoems = poems;

                    // Random start
                    currentIndex = Math.floor(Math.random() * allPoems.length);
                    renderPoem(currentIndex);

                    // Show container (no animation)
                    const container = document.getElementById('daily-poem-container');
                    container.style.display = 'block';

                    // Click Listeners
                    document.getElementById('next-poem').addEventListener('click', nextPoem);
                    document.getElementById('prev-poem').addEventListener('click', prevPoem);

                    // Keyboard Listeners
                    document.addEventListener('keydown', (e) => {
                        if (e.key === 'ArrowRight') {
                            nextPoem();
                        } else if (e.key === 'ArrowLeft') {
                            prevPoem();
                        }
                    });
                })
                .catch(err => console.error('Error loading poems:', err));
        });
    </script>
</body>

</html>